{{ header }}{{ column_left }}
<div id="content">
    <div class="page-header">
        <div class="container-fluid">
            <div class="pull-right">
                <button type="button" data-toggle="tooltip" title="{{ button_filter }}" onclick="$('#filter-product').toggleClass('hidden-sm hidden-xs');" class="btn btn-default hidden-md hidden-lg"><i class="fa fa-filter"></i></button>
                {#<a href="{{ add }}" data-toggle="tooltip" title="{{ button_add }}" class="btn btn-primary"><i class="fa fa-plus"></i></a>#}
                {#<button type="submit" form="form-product" formaction="{{ copy }}" data-toggle="tooltip" title="{{ button_copy }}" class="btn btn-default"><i class="fa fa-copy"></i></button>#}
                <button type="button" form="form-product" formaction="{{ delete }}" data-toggle="tooltip" title="{{ button_delete }}" class="btn btn-danger" onclick="confirm('{{ text_confirm }}') ? $('#form-product').submit() : false;"><i class="fa fa-trash-o"></i></button>
            </div>
            <h1>{{ heading_title }}</h1>
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <style>
        .form-group + .form-group {
            border-top: 0px;
        }
    </style>

    <!-- Modal View More -->
    <div class="modal fade" id="modal_view_more" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="overflow-y: auto;" id="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div id="filter-product" class="col-sm-12 hidden-sm hidden-xs">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title"> {{ text_more_details }}</h3>
                                    </div>
                                    <div class="panel-body">
                                        <table class="table table-bordered table-hover">
                                            <tbody>
                                            <tr id="tr_date_created">
                                                <th>Date Created</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_date_updated">
                                                <th>Date Updated</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_date_approved">
                                                <th>Date Approved</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_date_expires">
                                                <th>Date Expires</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_address">
                                                <th>Address</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_remarks">
                                                <th>Admin Remarks</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_description">
                                                <th>Description</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_width">
                                                <th>Width</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_height">
                                                <th>Height</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_length">
                                                <th>Length</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_dimension_units">
                                                <th>Dimension Units</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_weight">
                                                <th>Weight</th>
                                                <td></td>
                                            </tr>
                                            <tr id="tr_weight_units">
                                                <th>Weight Units</th>
                                                <td></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Video-->
    <div class="modal fade" id="modal_video" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document" style="width:60%;">
            <div class="modal-content">
                <div class="modal-body" style="overflow-y: auto;" id="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div id="filter-product" class="col-sm-12 hidden-sm hidden-xs">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Product Video</h3>
                                    </div>
                                    <div class="panel-body">
                                        <video id="product_video" width="100%" controls="">
                                        </video>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Images-->
    <div class="modal fade" id="modal_images" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="overflow-y: auto;" id="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div id="filter-product" class="col-sm-12 hidden-sm hidden-xs">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Product Images</h3>
                                    </div>
                                    <div class="panel-body">
                                        <div class="flexslider">
                                            <ul class="slides" id="flexslider-slides">
                                                <li>
                                                    <img src="/image/momday/1.jpeg" />
                                                </li>
                                                <li>
                                                    <img src="/image/momday/2.jpeg" />
                                                </li>
                                                <li>
                                                    <img src="/image/momday/3.jpeg" />
                                                </li>
                                                <li>
                                                    <img src="/image/momday/4.jpeg" />
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Remark -->
    <div class="modal fade" id="modal_remark" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="overflow-y: auto;" id="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div id="filter-product" class="col-sm-12 hidden-sm hidden-xs">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Leave Remark</h3>
                                    </div>
                                    <div class="panel-body">
                                        <form action="{{ remark }}" method="post" id="form_remark">
                                            <input type ="hidden" name="product_id" id="product_id_remark"/>
                                            <textarea maxlength="3000" rows="8" style="width:100%;" name="remark" id="remark_id"></textarea>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="postRemark()" form="form_remark" formaction="{{ remark }}" class="btn btn-success" style="float:left;" data-dismiss="modal">Save</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>



    {#<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>#}


    {#<script src="view/javascript/jquery/jquery-2.1.1.min.js" ></script>#}
    <link rel="stylesheet" href="view/javascript/flexslider/flexslider.css">
    <script src="view/javascript/flexslider/jquery.flexslider.js" ></script>

    <script>

        var products_images = {};
        {% if products %}
            {% for product in products %}
                    products_images['{{ product.product_id }}'] =['{{ product.image_large }}'];
                    {% for product_image in products_images %}
                        if('{{ product_image.product_id }}' === '{{ product.product_id }}') {
                            products_images['{{ product.product_id }}'].push('{{ product_image.image }}');
                        }
                    {% endfor %}
            {% endfor %}
        {% endif %}
        console.log(products_images);

        // $(window).load(function() {
        //     $('.flexslider').flexslider({
        //         animation: "slide"
        //     });
        // });

        // $(document).ready(function() {
        //     $('.flexslider').flexslider({
        //         animation: "slide"
        //     });
        // });

        var product_id_to_description = {};
        {% for product in products %}
        product_id_to_description["{{ product.product_id }}"] = "{{ product.description | replace({"\n":" ", "\r":' '}) }}";
        {% endfor %}

        function modalViewMore(product_id, date_added, date_modified, date_approved, date_expire, remarks, address, status,description,width,height,length,dimension_units,weight,weight_units){
            if(status !== 'active'){
                document.getElementById("tr_date_approved").style.display = "none";
                document.getElementById("tr_date_expires").style.display = "none";
            }else{
                document.getElementById("tr_date_approved").style.display = "";
                document.getElementById("tr_date_expires").style.display = "";
            }
            document.getElementById("tr_date_created").cells[1].innerHTML=date_added;
            document.getElementById("tr_date_updated").cells[1].innerHTML=date_modified;
            document.getElementById("tr_date_approved").cells[1].innerHTML=date_approved;
            document.getElementById("tr_date_expires").cells[1].innerHTML=date_expire;
            document.getElementById("tr_address").cells[1].innerHTML=address;
            document.getElementById("tr_remarks").cells[1].innerHTML=remarks;
            document.getElementById("tr_description").cells[1].innerHTML=product_id_to_description[product_id];
            document.getElementById("tr_width").cells[1].innerHTML=width;
            document.getElementById("tr_height").cells[1].innerHTML=height;
            document.getElementById("tr_length").cells[1].innerHTML=length;
            document.getElementById("tr_dimension_units").cells[1].innerHTML=dimension_units;
            document.getElementById("tr_weight").cells[1].innerHTML=weight;
            document.getElementById("tr_weight_units").cells[1].innerHTML=weight_units;
            $("#modal_view_more").modal();
        }

        function modalViewVideo(video){
            document.getElementById("product_video").src = video;
            $("#modal_video").modal();
        }

        function modalViewImages(product_id){
            $('.flexslider').removeData("flexslider");
            var slider_content = "";
            var product_image;
            for(product_image in products_images[product_id]){
                slider_content +=
                    "                                                <li>\n" +
                    "                                                    <img src='"+ '{{ image_url }}' + products_images[product_id][product_image] + "' />" + "\n" +
                    "                                                </li>\n"
            }
            document.getElementById("flexslider-slides").innerHTML = slider_content;
            $("#modal_images").modal();
        }

        $('#modal_video').on('hidden.bs.modal', function (e) {
            var vid = document.getElementById("product_video");
            vid.pause();
        });

        $('#modal_images').on('shown.bs.modal', function (e) {
            // $(window).load(function() {
            $('.flex-control-nav').remove();
                $('.flexslider').flexslider({
                    animation: "slide"
                });
            // });
        });

        function modalRemark(product_id, remark){
            document.getElementById("product_id_remark").value = product_id;
            document.getElementById("remark_id").value = remark;
            $("#modal_remark").modal();
        }

        function activateProduct(product_id){
            document.getElementById('activate_product_id').value= product_id;
            document.getElementById('form_activate').submit();
        }

        function rejectProduct(product_id){
            document.getElementById('reject_product_id').value= product_id;
            document.getElementById('form_reject').submit();
        }

        function postRemark(){
            document.getElementById('form_remark').submit();
        }
    </script>

    <form action="{{ activate }}" method="post" id="form_activate">
        <input type="hidden" name="product_id" id="activate_product_id">
    </form>
    <form action="{{ reject }}" method="post" id="form_reject">
        <input type="hidden" name="product_id" id="reject_product_id">
    </form>

    <div class="container-fluid">{% if error_warning %}
            <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
                <button type="button" class="close" data-dismiss="alert">&times;</button>
            </div>
        {% endif %}
        {% if success %}
            <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
                <button type="button" class="close" data-dismiss="alert">&times;</button>
            </div>
        {% endif %}
        <div class="row">
            <div id="filter-product" class="col-sm-12 hidden-sm hidden-xs">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-filter"></i> {{ text_filter }}</h3>
                    </div>
                    <div class="panel-body">
                        <div class="form-group col-sm-4">
                            <label class="control-label" for="input-name">{{ entry_name }}</label>
                            <input type="text" name="filter_name" value="{{ filter_name }}" placeholder="{{ entry_name }}" id="input-name" class="form-control" />
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="control-label" for="input-customer-name">{{ entry_customer_name }}</label>
                            <input type="text" name="filter_customer_name" value="{{ filter_customer_name }}" placeholder="{{ entry_name }}" id="input-customer-name" class="form-control" />
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="control-label" for="input-date_modified">{{ entry_date_modified }}</label>
                            <input type="text" name="filter_date_modified" value="{{ filter_date_modified }}" placeholder="{{ entry_date_modified }}" id="input-date-modified" class="form-control" />
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="control-label" for="input-price">{{ entry_price }}</label>
                            <input type="text" name="filter_price" value="{{ filter_price }}" placeholder="{{ entry_price }}" id="input-price" class="form-control" />
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="control-label" for="input-status">{{ entry_status }}</label>
                            <select name="filter_status" id="input-status" class="form-control">
                                <option value=""></option>
                                {% if filter_status == 'active' %}
                                    <option value="active" selected="selected">{{ text_active }}</option>
                                {% else %}
                                    <option value="active">{{ text_active }}</option>
                                {% endif %}
                                {% if filter_status == 'pending' %}
                                    <option value="pending" selected="selected">{{ text_pending }}</option>
                                {% else %}
                                    <option value="pending">{{ text_pending }}</option>
                                {% endif %}
                                {% if filter_status == 'rejected' %}
                                    <option value="rejected" selected="selected">{{ text_rejected }}</option>
                                {% else %}
                                    <option value="rejected">{{ text_rejected }}</option>
                                {% endif %}
                                {% if filter_status == 'inactive' %}
                                    <option value="inactive" selected="selected">{{ text_inactive }}</option>
                                {% else %}
                                    <option value="inactive">{{ text_inactive }}</option>
                                {% endif %}
                                {% if filter_status == 'sold' %}
                                    <option value="sold" selected="selected">{{ text_sold }}</option>
                                {% else %}
                                    <option value="sold">{{ text_sold }}</option>
                                {% endif %}
                            </select>
                        </div>
                        <div class="form-group text-right col-sm-4">
                            <button type="button" id="button-filter" class="btn btn-default"><i class="fa fa-filter"></i> {{ button_filter }}</button>
                            <a href="{{ view_all }}" class="btn btn-default"> {{ text_view_all }}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-list"></i> {{ text_list }}</h3>
                    </div>
                    <div class="panel-body">
                        <form action="{{ delete }}" method="post" enctype="multipart/form-data" id="form-product">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <td style="width: 1px;" class="text-center"><input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);" /></td>
                                        <td class="text-center">{{ column_image }}</td>
                                        <td class="text-left">{% if sort == 'pd.name' %} <a href="{{ sort_name }}" class="{{ order|lower }}">{{ column_name }}</a> {% else %} <a href="{{ sort_name }}">{{ column_name }}</a> {% endif %}</td>
                                        <td class="text-left">{% if sort == 'c.customer_name' %} <a href="{{ sort_c_customer_name }}" class="{{ order|lower }}">{{ column_c_customer_name }}</a> {% else %} <a href="{{ sort_c_customer_name }}">{{ column_c_customer_name }}</a> {% endif %}</td>
                                        <td class="text-left">{% if sort == 'cs.date_modified' %} <a href="{{ sort_cs_date_modified }}" class="{{ order|lower }}">{{ column_cs_date_modified }}</a> {% else %} <a href="{{ sort_cs_date_modified }}">{{ column_cs_date_modified }}</a> {% endif %}</td>
                                        {#<td class="text-left">{% if sort == 'p.model' %} <a href="{{ sort_model }}" class="{{ order|lower }}">{{ column_model }}</a> {% else %} <a href="{{ sort_model }}">{{ column_model }}</a> {% endif %}</td>#}
                                        <td class="text-right">{% if sort == 'p.price' %} <a href="{{ sort_price }}" class="{{ order|lower }}">{{ column_price }}</a> {% else %} <a href="{{ sort_price }}">{{ column_price }}</a> {% endif %}</td>
                                        {#<td class="text-right">{% if sort == 'p.quantity' %} <a href="{{ sort_quantity }}" class="{{ order|lower }}">{{ column_quantity }}</a> {% else %} <a href="{{ sort_quantity }}">{{ column_quantity }}</a> {% endif %}</td>#}
                                        <td class="text-left">{% if sort == 'p.status' %} <a href="{{ sort_status }}" class="{{ order|lower }}">{{ column_status }}</a> {% else %} <a href="{{ sort_status }}">{{ column_status }}</a> {% endif %}</td>
                                        <td class="text-right">{{ column_action }}</td>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% if products %}
                                        {% for product in products %}
                                            <tr>
                                                <td class="text-center">{% if product.product_id in selected %}
                                                        <input type="checkbox" name="selected[]" value="{{ product.product_id }}" checked="checked" />
                                                    {% else %}
                                                        <input type="checkbox" name="selected[]" value="{{ product.product_id }}" />
                                                    {% endif %}</td>
                                                <td class="text-center">{% if product.image %} <img src="{{ product.image }}" alt="{{ product.name }}" class="img-thumbnail" /> {% else %} <span class="img-thumbnail list"><i class="fa fa-camera fa-2x"></i></span> {% endif %}</td>
                                                <td class="text-left">{{ product.name }}</td>
                                                <td class="text-left">{{ product.customer_name }}</td>
                                                <td class="text-left">{{ product.date_modified }}</td>
                                                {#<td class="text-left">{{ product.model }}</td>#}
                                                <td class="text-right">{% if product.special %} <span style="text-decoration: line-through;">{{ product.price }}</span><br/>
                                                        <div class="text-danger">{{ product.special }}</div>
                                                    {% else %}
                                                        {{ product.price }}
                                                    {% endif %}</td>
                                                {#<td class="text-right">{% if product.quantity <= 0 %} <span class="label label-warning">{{ product.quantity }}</span> {% elseif product.quantity <= 5 %} <span class="label label-danger">{{ product.quantity }}</span> {% else %} <span class="label label-success">{{ product.quantity }}</span> {% endif %}</td>#}
                                                <td class="text-left">{{ product.status }}</td>




                                                <td class="text-right">
                                                    {% if product.video %}
                                                        <a onclick="modalViewVideo('{{ image_url }}{{ product.video }}')" data-toggle="tooltip" title="{{ button_video }}" class="btn btn-primary"><i class="fa fa-play"></i></a>
                                                    {% endif %}
                                                    {#{% if products_images[product.product_id] %}#}
                                                        <a onclick="modalViewImages('{{ product.product_id }}')" data-toggle="tooltip" title="{{ button_images }}" class="btn btn-primary"><i class="fa fa-image"></i></a>
                                                    {#{% endif %}#}
                                                    <div style="min-width: 120px; display:inline;">
                                                        <div class="btn-group">
                                                            <a onclick="modalViewMore('{{ product.product_id }}', '{{ product.date_added }}', '{{ product.date_modified }}', '{{ product.date_approved }}', '{{ product.date_expire }}', '{{ product.remarks }}', '{{ product.address }}',
                                                                    '{{ product.status }}', '{{ product.status }}', '{{ product.width }}', '{{ product.height }}', '{{ product.length }}', '{{ product.dimension_units }}', '{{ product.weight }}', '{{ product.weight_units }}' )" data-toggle="tooltip" title="{{ button_view_more }}" class="btn btn-primary"><i class="fa fa-ellipsis-h"></i></a>
                                                            <button type="button" data-toggle="dropdown" class="btn btn-primary dropdown-toggle"><span class="caret"></span></button>
                                                            <ul class="dropdown-menu dropdown-menu-right">
                                                                <li>
                                                                    {% if product.status=='pending' or product.status=='rejected' %}
                                                                        {#<button type="submit" form="form_activate" onclick="activateProduct('{{ product.product_id }}')"><i class="fa fa-power-off"></i> {{ button_activate }}</button>#}
                                                                        <a style="cursor: pointer;" onclick="activateProduct('{{ product.product_id }}')"><i class="fa fa-power-off"></i> {{ button_activate }}</a>
                                                                    {% endif %}
                                                                </li>
                                                                <li>
                                                                    {% if product.status=='pending' or product.status=='rejected' %}
                                                                        <a style="cursor: pointer;" onclick="modalRemark('{{ product.product_id }}', '{{ product.remarks }}')"><i class="fa fa-comment"></i> {{ text_add_remark }}</a>
                                                                    {% endif %}
                                                                </li>
                                                                <li>
                                                                    {% if product.status=='active' or product.status=='pending' %}
                                                                        <a style="cursor: pointer;" onclick="rejectProduct('{{ product.product_id }}')"><i class="fa fa-ban"></i> {{ button_reject }}</a>
                                                                    {% endif %}
                                                                </li>
                                                                <li>
                                                                    <a href="{{ product.edit }}"><i class="fa fa-pencil"></i> {{ button_edit }}</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </td>

                                                {#<td class="text-right">#}
                                                    {#<a onclick="modalViewMore('{{ product.date_added }}', '{{ product.date_modified }}', '{{ product.date_approved }}', '{{ product.date_expire }}', '{{ product.remarks }}', '{{ product.address }}', '{{ product.status }}')" data-toggle="tooltip" title="{{ button_view_more }}" class="btn btn-primary"><i class="fa fa-ellipsis-h"></i></a>#}
                                                    {#{% if product.video %}#}
                                                    {#<a onclick="modalViewVideo('{{ image_url }}{{ product.video }}')" data-toggle="tooltip" title="{{ button_video }}" class="btn btn-primary"><i class="fa fa-play"></i></a>#}
                                                    {#{% endif %}#}
                                                    {#{% if product.status=='pending' %}#}
                                                    {#<a onclick="modalEnable ('{{ product.product_id }}')" data-toggle="tooltip" title="{{ button_enable }}" class="btn btn-primary"><i class="fa fa-power-off"></i></a>#}
                                                    {#{% endif %}#}
                                                    {#{% if product.status=='enabled' or product.status=='pending' %}#}
                                                    {#<a onclick="modalDisable ('{{ product.remark }}', '{{ product.product_id }}')" data-toggle="tooltip" title="{{ button_deactivate }}" class="btn btn-primary"><i class="fa fa-ban"></i></a>#}
                                                    {#{% endif %}#}
                                                    {#<a href="{{ product.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a>#}
                                                {#</td>#}



                                            </tr>
                                        {% endfor %}
                                    {% else %}
                                        <tr>
                                            <td class="text-center" colspan="8">{{ text_no_results }}</td>
                                        </tr>
                                    {% endif %}
                                    </tbody>

                                </table>
                            </div>
                        </form>
                        <div class="row">
                            <div class="col-sm-6 text-left">{{ pagination }}</div>
                            <div class="col-sm-6 text-right">{{ results }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript"><!--
        $('#button-filter').on('click', function() {
            var url = '';

            var filter_name = $('input[name=\'filter_name\']').val();

            if (filter_name) {
                url += '&filter_name=' + encodeURIComponent(filter_name);
            }

            var filter_customer_name = $('input[name=\'filter_customer_name\']').val();

            if (filter_customer_name) {
                url += '&filter_customer_name=' + encodeURIComponent(filter_customer_name);
            }

            var filter_date_modified = $('input[name=\'filter_date_modified\']').val();

            if (filter_date_modified) {
                url += '&filter_date_modified=' + encodeURIComponent(filter_date_modified);
            }

            var filter_model = $('input[name=\'filter_model\']').val();

            if (filter_model) {
                url += '&filter_model=' + encodeURIComponent(filter_model);
            }

            var filter_price = $('input[name=\'filter_price\']').val();

            if (filter_price) {
                url += '&filter_price=' + encodeURIComponent(filter_price);
            }

            // var filter_quantity = $('input[name=\'filter_quantity\']').val();
            //
            // if (filter_quantity) {
            //     url += '&filter_quantity=' + encodeURIComponent(filter_quantity);
            // }

            var filter_status = $('select[name=\'filter_status\']').val();

            if (filter_status !== '') {
                url += '&filter_status=' + encodeURIComponent(filter_status);
            }

            location = 'index.php?route=momday/preloved&user_token={{ user_token }}' + url;
        });
        //--></script>
    <script type="text/javascript"><!--
        // IE and Edge fix!
        $('button[form=\'form-product\']').on('click', function(e) {
            $('#form-product').attr('action', $(this).attr('formaction'));
        });

        $('input[name=\'filter_name\']').autocomplete({
            'source': function(request, response) {
                $.ajax({
                    url: 'index.php?route=momday/preloved/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
                    dataType: 'json',
                    success: function(json) {
                        response($.map(json, function(item) {
                            return {
                                label: item['name'],
                                value: item['product_id']
                            }
                        }));
                    }
                });
            },
            'select': function(item) {
                $('input[name=\'filter_name\']').val(item['label']);
            }
        });

        $('input[name=\'filter_model\']').autocomplete({
            'source': function(request, response) {
                $.ajax({
                    url: 'index.php?route=momday/preloved/autocomplete&user_token={{ user_token }}&filter_model=' +  encodeURIComponent(request),
                    dataType: 'json',
                    success: function(json) {
                        response($.map(json, function(item) {
                            return {
                                label: item['model'],
                                value: item['product_id']
                            }
                        }));
                    }
                });
            },
            'select': function(item) {
                $('input[name=\'filter_model\']').val(item['label']);
            }
        });
        //--></script></div>
{{ footer }}